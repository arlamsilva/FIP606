{
  "hash": "fcf0fe16d5a42d387dfb3e4c5bd6d03a",
  "result": {
    "markdown": "---\ntitle: \"Aula16\"\nauthor: \"Arlam\"\nformat: html\n---\n\n\n## Mapas no R\n\n\n::: {.cell hash='aula16_cache/html/unnamed-chunk-1_002547f3b90e6be2aebd3ee1cc096fc0'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'ggplot2' was built under R version 4.2.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'tibble' was built under R version 4.2.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'dplyr' was built under R version 4.2.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.2     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.2     ✔ tibble    3.2.1\n✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n✔ purrr     1.0.1     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\nlibrary(readxl)\nlibrary(ggplot2)\nlibrary(r4pde)\nlibrary(rnaturalearth)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'rnaturalearth' was built under R version 4.2.3\n```\n:::\n\n```{.r .cell-code}\nlibrary(rnaturalearthhires)\n```\n:::\n\n\nInstalar pacote do github:\n\n\n::: {.cell hash='aula16_cache/html/unnamed-chunk-2_7d1930cb3a35c6d24e57da7651b343e7'}\n\n```{.r .cell-code}\nremotes::install_github(\"ropensci/rnaturalearthhires\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nSkipping install of 'rnaturalearthhires' from a github remote, the SHA1 (c3785a8c) has not changed since last install.\n  Use `force = TRUE` to force installation\n```\n:::\n:::\n\n\nConjunto de dados: Para plotar o mapa do pais, usa-se a função ne_countries\n\n\n::: {.cell hash='aula16_cache/html/unnamed-chunk-3_86080b04a901f5aa3a35c784080f2b1b'}\n\n```{.r .cell-code}\nsbr <- RustSoybean\n\nBRA <- ne_countries(country = \"Brazil\", \n                    returnclass = \"sf\")\nggplot(BRA) +\ngeom_sf(fill = \"white\")\n```\n\n::: {.cell-output-display}\n![](aula16_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\nPara plotar os estados:\n\n\n::: {.cell hash='aula16_cache/html/unnamed-chunk-4_d1fc5d1b287d3cb8bafd60f810efc776'}\n\n```{.r .cell-code}\nBRA <- ne_states(country = \"Brazil\", \n                    returnclass = \"sf\")\nggplot(BRA) +\ngeom_sf(color = \"white\",\n          fill = \"darkgreen\") +\n  theme_void()\n```\n\n::: {.cell-output-display}\n![](aula16_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\nPara selecionar um estado: Para\n\n\n::: {.cell hash='aula16_cache/html/unnamed-chunk-5_a1030ca2621fe9f13d989b7785cf1847'}\n\n```{.r .cell-code}\nBRA <- ne_states(country = \"Brazil\", \n                    returnclass = \"sf\")\nMG <- BRA |> filter(name_en == \"Minas Gerais\")\nggplot(BRA) +\ngeom_sf(color = \"black\",\n          fill = \"white\") +\n  geom_sf(data = MG, color = \"black\",\n            fill = \"green\")\n```\n\n::: {.cell-output-display}\n![](aula16_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\nPara inserir os pontos especificos dos dados (latitude e longitude): Para plotar os pontos, precisa-se das coordenadas de onde foram coletados os pontos. Ex.: pontos de coleta - precisa-se coletar as coordenadas para plotar em um mapa (no caso de ser só o municipio, pode pegar na internet as coordenadas).\n\n\n::: {.cell hash='aula16_cache/html/unnamed-chunk-6_e20a1de39c9308173600ec37515d8e17'}\n\n```{.r .cell-code}\nBRA <- ne_states(country = \"Brazil\", \n                    returnclass = \"sf\")\nMG <- BRA |> filter(name_en == \"Minas Gerais\")\nggplot(BRA) +\ngeom_sf(color = \"black\",\n          fill = \"white\") +\n  geom_point(data = sbr, aes(longitude, latitude), alpha = 0.5)\n```\n\n::: {.cell-output-display}\n![](aula16_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\nPara separar a data em dia, mês e ano:\n\n\n::: {.cell hash='aula16_cache/html/unnamed-chunk-7_338530f3d62cca90a18d2b5105683205'}\n\n```{.r .cell-code}\nsbr2 <- sbr |>\n  separate(planting, into = \n             c(\"year\", \"month\", \"day\"), sep = \"-\", remove = FALSE)\n\nBRA <- ne_states(country = \"Brazil\", \n                    returnclass = \"sf\")\nMG <- BRA |> filter(name_en == \"Minas Gerais\")\nggplot(BRA) +\ngeom_sf(color = \"black\",\n          fill = \"white\") +\n  geom_point(data = sbr2,\n             aes(longitude, latitude, color = year), alpha = 0.5)+\n  facet_wrap(~year)+\n  theme_void()\n```\n\n::: {.cell-output-display}\n![](aula16_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\nComo inserir a rosa dos ventos e a escala no mapa:\n\n\n::: {.cell hash='aula16_cache/html/unnamed-chunk-8_82873c8483a716fd62b2499d1219c492'}\n\n```{.r .cell-code}\nlibrary(ggspatial)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'ggspatial' was built under R version 4.2.3\n```\n:::\n\n```{.r .cell-code}\nggplot(BRA) +\n  annotation_north_arrow(location = \"bl\")+\n  annotation_scale(location = \"br\")+\n  geom_sf(color = \"black\",\n          fill = \"white\") +\n  geom_point(data = sbr2,\n             aes(longitude, latitude, color = year, size = severity), alpha = 0.5)+\n  labs(color = \"Planting Year\")+\n  theme_minimal()+\n  theme(legend.position = \"right\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nScale on map varies by more than 10%, scale bar may be inaccurate\n```\n:::\n\n::: {.cell-output-display}\n![](aula16_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\nMalha de municipios: Pega o arquivo shape, que baixado dos municipios em um site do IBJE ou outro confiável. Usa o pacote rgdal e executa os eeguintes comandos:\n\n\n::: {.cell hash='aula16_cache/html/unnamed-chunk-9_3462534b5ca46adf4c949af065fc2128'}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nggplot()+\n   geom_sf(data = MG, fill = \"red\")+\n     labs(title = \"ESTADO DE MINAS GERAIS\")\n```\n\n::: {.cell-output-display}\n![](aula16_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}